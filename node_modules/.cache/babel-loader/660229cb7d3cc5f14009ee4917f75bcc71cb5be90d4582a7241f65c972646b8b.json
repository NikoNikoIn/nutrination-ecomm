{"ast":null,"code":"import React,{useEffect}from'react';import{Button,Table,Row,Col}from'react-bootstrap';import{LinkContainer}from'react-router-bootstrap';import{useDispatch,useSelector}from'react-redux';import{useNavigate,useLocation}from'react-router-dom';import Loader from'../components/Loader';import Message from'../components/Message';import Paginate from'../components/Paginate';import{listProducts,deleteProduct,createProduct}from'../actions/productActions';import{PRODUCT_CREATE_RESET}from'../constants/productConstants';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function ProductListScreen(){var dispatch=useDispatch();var navigate=useNavigate();var location=useLocation();var searchParams=new URLSearchParams(location.search);var productList=useSelector(function(state){return state.productList;});var loading=productList.loading,error=productList.error,products=productList.products,pages=productList.pages;var productDelete=useSelector(function(state){return state.productDelete;});var loadingDelete=productDelete.loading,errorDelete=productDelete.error,successDelete=productDelete.success;var productCreate=useSelector(function(state){return state.productCreate;});var loadingCreate=productCreate.loading,errorCreate=productCreate.error,successCreate=productCreate.success,createdProduct=productCreate.product;var userLogin=useSelector(function(state){return state.userLogin;});var userInfo=userLogin.userInfo;var keyword=searchParams.get('keyword')||'';var page=searchParams.get('page')||1;useEffect(function(){dispatch({type:PRODUCT_CREATE_RESET});if(!userInfo.isAdmin){navigate(-1);}if(successCreate){navigate(\"/admin/product/\".concat(createdProduct._id,\"/edit\"));}else{dispatch(listProducts(keyword,page));}},[dispatch,userInfo,successDelete,navigate,successCreate,createdProduct,keyword,page]);var deleteHandler=function deleteHandler(id){if(window.confirm('Are you sure you want to delete this product?')){dispatch(deleteProduct(id));}};var createProductHandler=function createProductHandler(){dispatch(createProduct());};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(Row,{className:\"align-items-center\",children:[/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsx(\"h1\",{children:\"Products\"})}),/*#__PURE__*/_jsx(Col,{className:\"text-right\",children:/*#__PURE__*/_jsxs(Button,{className:\"my-3\",onClick:createProductHandler,children:[/*#__PURE__*/_jsx(\"i\",{className:\"fa-solid fa-plus\"}),\" Create Product\"]})})]}),loadingDelete&&/*#__PURE__*/_jsx(Loader,{}),errorDelete&&/*#__PURE__*/_jsx(Message,{variant:\"danger\",children:errorDelete}),loadingCreate&&/*#__PURE__*/_jsx(Loader,{}),errorCreate&&/*#__PURE__*/_jsx(Message,{variant:\"danger\",children:errorCreate}),loading?/*#__PURE__*/_jsx(Loader,{}):error?/*#__PURE__*/_jsx(Message,{variant:\"danger\",children:error}):/*#__PURE__*/_jsxs(Table,{striped:true,bordered:true,hover:true,responsive:true,style:{tableLayout:'fixed',width:'100%'},children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{style:{width:'16%'},children:\"ID\"}),/*#__PURE__*/_jsx(\"th\",{style:{width:'16%'},children:\"NAME\"}),/*#__PURE__*/_jsx(\"th\",{style:{width:'16%'},children:\"PRICE\"}),/*#__PURE__*/_jsx(\"th\",{style:{width:'16%'},children:\"CATEGORY\"}),/*#__PURE__*/_jsx(\"th\",{style:{width:'16%'},children:\"BRAND\"}),/*#__PURE__*/_jsx(\"th\",{style:{width:'10%'}})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:products.map(function(product){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{style:{width:'16%'},children:product._id}),/*#__PURE__*/_jsx(\"td\",{style:{width:'16%'},children:product.name}),/*#__PURE__*/_jsxs(\"td\",{style:{width:'16%'},children:[\"$\",product.price]}),/*#__PURE__*/_jsx(\"td\",{style:{width:'16%'},children:product.category}),/*#__PURE__*/_jsx(\"td\",{style:{width:'16%'},children:product.brand}),/*#__PURE__*/_jsxs(\"td\",{style:{width:'10%'},children:[/*#__PURE__*/_jsx(LinkContainer,{to:\"/admin/product/\".concat(product._id,\"/edit\"),children:/*#__PURE__*/_jsx(Button,{variant:\"light\",className:\"btn-sm\",children:/*#__PURE__*/_jsx(\"i\",{class:\"fa-solid fa-pen-to-square\"})})}),/*#__PURE__*/_jsx(Button,{variant:\"danger\",className:\"btn-sm\",onClick:function onClick(){return deleteHandler(product._id);},children:/*#__PURE__*/_jsx(\"i\",{class:\"fa-solid fa-trash\"})})]})]},product._id);})})]}),/*#__PURE__*/_jsx(Paginate,{page:page,pages:pages,keyword:keyword,isAdmin:true})]});}export default ProductListScreen;","map":{"version":3,"names":["React","useEffect","Button","Table","Row","Col","LinkContainer","useDispatch","useSelector","useNavigate","useLocation","Loader","Message","Paginate","listProducts","deleteProduct","createProduct","PRODUCT_CREATE_RESET","jsx","_jsx","jsxs","_jsxs","ProductListScreen","dispatch","navigate","location","searchParams","URLSearchParams","search","productList","state","loading","error","products","pages","productDelete","loadingDelete","errorDelete","successDelete","success","productCreate","loadingCreate","errorCreate","successCreate","createdProduct","product","userLogin","userInfo","keyword","get","page","type","isAdmin","concat","_id","deleteHandler","id","window","confirm","createProductHandler","children","className","onClick","variant","striped","bordered","hover","responsive","style","tableLayout","width","map","name","price","category","brand","to","class"],"sources":["C:/ecomm backup/nutrination/backend/src/screens/ProductListScreen.js"],"sourcesContent":["import React, {useEffect} from 'react'\r\nimport { Button, Table, Row, Col } from 'react-bootstrap'\r\nimport { LinkContainer } from 'react-router-bootstrap'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { useNavigate, useLocation } from 'react-router-dom'\r\nimport Loader from '../components/Loader'\r\nimport Message from '../components/Message'\r\nimport Paginate from '../components/Paginate'\r\nimport { listProducts, deleteProduct, createProduct } from '../actions/productActions'\r\nimport { PRODUCT_CREATE_RESET } from '../constants/productConstants'\r\n\r\n\r\nfunction ProductListScreen() {\r\n\r\n    const dispatch = useDispatch()\r\n    const navigate = useNavigate()\r\n\r\n    const location = useLocation()\r\n    const searchParams = new URLSearchParams(location.search)\r\n\r\n    const productList = useSelector(state => state.productList)\r\n    const { loading, error, products, pages } = productList\r\n\r\n    const productDelete = useSelector(state => state.productDelete)\r\n    const { loading: loadingDelete, error: errorDelete, success: successDelete } = productDelete\r\n\r\n    const productCreate = useSelector(state => state.productCreate)\r\n    const { loading: loadingCreate, error: errorCreate, success: successCreate, product: createdProduct } = productCreate\r\n\r\n    const userLogin = useSelector(state => state.userLogin)\r\n    const { userInfo } = userLogin\r\n\r\n    const keyword = searchParams.get('keyword') || ''\r\n    const page = searchParams.get('page') || 1\r\n\r\n    useEffect(() => {\r\n        dispatch({type:PRODUCT_CREATE_RESET})\r\n\r\n        if (!userInfo.isAdmin) {\r\n            navigate(-1)\r\n        }\r\n\r\n        if (successCreate) {\r\n            navigate(`/admin/product/${createdProduct._id}/edit`)\r\n        } else {\r\n            dispatch(listProducts(keyword, page))\r\n        }\r\n    }, [dispatch, userInfo, successDelete, navigate, successCreate, createdProduct, keyword, page])\r\n\r\n    const deleteHandler = (id) => {\r\n        if(window.confirm('Are you sure you want to delete this product?')) {\r\n            dispatch(deleteProduct(id))\r\n        }\r\n    }\r\n\r\n    const createProductHandler = () => {\r\n        dispatch(createProduct())\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <Row className='align-items-center'>\r\n                <Col>\r\n                    <h1>Products</h1>\r\n                </Col>\r\n                <Col className='text-right'>\r\n                    <Button className='my-3' onClick={createProductHandler}>\r\n                        <i className='fa-solid fa-plus'></i> Create Product\r\n                    </Button>\r\n                </Col>\r\n            </Row>\r\n\r\n            {loadingDelete && <Loader />}\r\n            {errorDelete && <Message variant='danger'>{errorDelete}</Message>}\r\n            \r\n            {loadingCreate && <Loader />}\r\n            {errorCreate && <Message variant='danger'>{errorCreate}</Message>}\r\n            \r\n            { loading \r\n                ? <Loader /> \r\n                : error \r\n                    ? <Message variant='danger'>{error}</Message>\r\n                    : (\r\n                        <Table striped bordered hover responsive style={{ tableLayout: 'fixed', width: '100%' }}>\r\n                            <thead>\r\n                                <tr>\r\n                                    <th style={{ width: '16%' }}>ID</th>\r\n                                    <th style={{ width: '16%' }}>NAME</th>\r\n                                    <th style={{ width: '16%' }}>PRICE</th>\r\n                                    <th style={{ width: '16%' }}>CATEGORY</th>\r\n                                    <th style={{ width: '16%' }}>BRAND</th>\r\n                                    <th style={{ width: '10%' }}></th>\r\n                                </tr>\r\n                            </thead>\r\n\r\n                            <tbody>\r\n                                {products.map(product => (\r\n                                    <tr key={product._id}>\r\n                                        <td style={{ width: '16%' }}>{product._id}</td>\r\n                                        <td style={{ width: '16%' }}>{product.name}</td>\r\n                                        <td style={{ width: '16%' }}>${product.price}</td>\r\n                                        <td style={{ width: '16%' }}>{product.category}</td>\r\n                                        <td style={{ width: '16%' }}>{product.brand}</td>\r\n                                        <td style={{ width: '10%' }}>\r\n                                            <LinkContainer to={`/admin/product/${product._id}/edit`}>\r\n                                                <Button variant='light' className='btn-sm'>\r\n                                                    <i class='fa-solid fa-pen-to-square'></i>\r\n                                                </Button>\r\n                                            </LinkContainer>\r\n\r\n                                            <Button variant='danger' className='btn-sm' onClick={() => deleteHandler(product._id)}>\r\n                                                <i class='fa-solid fa-trash'></i>\r\n                                            </Button>\r\n                                        </td>\r\n \r\n                                    </tr>\r\n                                ))}\r\n                            </tbody>\r\n                        </Table>\r\n                    )}\r\n            <Paginate page={page} pages={pages} keyword={keyword} isAdmin={true}/>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default ProductListScreen\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}