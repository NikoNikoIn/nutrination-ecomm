{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Button,Table}from'react-bootstrap';import{LinkContainer}from'react-router-bootstrap';import{useDispatch,useSelector}from'react-redux';import{useNavigate}from'react-router-dom';import Loader from'../components/Loader';import Message from'../components/Message';import{listOrders,deleteOrder}from'../actions/orderActions';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function OrderListScreen(){var dispatch=useDispatch();var navigate=useNavigate();var orderList=useSelector(function(state){return state.orderList;});var loading=orderList.loading,error=orderList.error,orders=orderList.orders;var userLogin=useSelector(function(state){return state.userLogin;});var userInfo=userLogin.userInfo;var orderDelete=useSelector(function(state){return state.orderDelete;});var loadingDelete=orderDelete.loading,errorDelete=orderDelete.error,successDelete=orderDelete.success;useEffect(function(){if(userInfo&&userInfo.isAdmin){dispatch(listOrders());}else navigate(-1);},[dispatch,userInfo,successDelete,navigate]);var deleteHandler=function deleteHandler(id){if(window.confirm('Are you sure you want to delete this order?')){dispatch(deleteOrder(id));}};var deleteWhenNoUser=function deleteWhenNoUser(id){dispatch(deleteOrder(id));};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Orders\"}),loadingDelete&&/*#__PURE__*/_jsx(Loader,{}),errorDelete&&/*#__PURE__*/_jsx(Message,{variant:\"danger\",children:errorDelete}),loading?/*#__PURE__*/_jsx(Loader,{}):error?/*#__PURE__*/_jsx(Message,{variant:\"danger\",children:error}):/*#__PURE__*/_jsxs(Table,{striped:true,bordered:true,hover:true,responsive:true,style:{tableLayout:'fixed',width:'100%'},children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{style:{width:'14%'},children:\"ID\"}),/*#__PURE__*/_jsx(\"th\",{style:{width:'14%'},children:\"USER\"}),/*#__PURE__*/_jsx(\"th\",{style:{width:'14%'},children:\"DATE\"}),/*#__PURE__*/_jsx(\"th\",{style:{width:'14%'},children:\"TOTAL\"}),/*#__PURE__*/_jsx(\"th\",{style:{width:'14%'},children:\"PAID\"}),/*#__PURE__*/_jsx(\"th\",{style:{width:'14%'},children:\"DELIVERED\"}),/*#__PURE__*/_jsx(\"th\",{style:{width:'10%'}})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:orders.map(function(order){return/*#__PURE__*/_jsx(\"tr\",{children:!order.user||!order.user.name?deleteWhenNoUser(order._id):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"td\",{style:{width:'14%'},children:order._id}),/*#__PURE__*/_jsx(\"td\",{style:{width:'14%'},children:order.user&&order.user.name}),/*#__PURE__*/_jsx(\"td\",{style:{width:'14%'},children:new Date(order.createdAt).toLocaleString()}),/*#__PURE__*/_jsxs(\"td\",{style:{width:'14%'},children:[\"$\",order.totalPrice]}),/*#__PURE__*/_jsx(\"td\",{style:{width:'14%'},children:order.isPaid?new Date(order.paidAt).toLocaleString():/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-times\",style:{color:'red'}})}),/*#__PURE__*/_jsx(\"td\",{style:{width:'14%'},children:order.isDelivered?new Date(order.deliveredAt).toLocaleString():/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-times\",style:{color:'red'}})}),/*#__PURE__*/_jsxs(\"td\",{style:{width:'10%'},children:[/*#__PURE__*/_jsx(LinkContainer,{to:\"/order/\".concat(order._id),children:/*#__PURE__*/_jsx(Button,{variant:\"light\",className:\"btn-sm\",children:/*#__PURE__*/_jsx(\"i\",{class:\"fa-solid fa-circle-info\"})})}),/*#__PURE__*/_jsx(Button,{variant:\"danger\",className:\"btn-sm\",onClick:function onClick(){return deleteHandler(order._id);},children:/*#__PURE__*/_jsx(\"i\",{class:\"fa-solid fa-trash\"})})]})]})},order._id);})})]})]});}export default OrderListScreen;","map":{"version":3,"names":["React","useState","useEffect","Button","Table","LinkContainer","useDispatch","useSelector","useNavigate","Loader","Message","listOrders","deleteOrder","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","OrderListScreen","dispatch","navigate","orderList","state","loading","error","orders","userLogin","userInfo","orderDelete","loadingDelete","errorDelete","successDelete","success","isAdmin","deleteHandler","id","window","confirm","deleteWhenNoUser","children","variant","striped","bordered","hover","responsive","style","tableLayout","width","map","order","user","name","_id","Date","createdAt","toLocaleString","totalPrice","isPaid","paidAt","className","color","isDelivered","deliveredAt","to","concat","class","onClick"],"sources":["C:/ecomm backup/nutrination/backend/src/screens/OrderListScreen.js"],"sourcesContent":["import React, {useState, useEffect} from 'react'\r\nimport { Button, Table } from 'react-bootstrap'\r\nimport { LinkContainer } from 'react-router-bootstrap'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { useNavigate } from 'react-router-dom'\r\nimport Loader from '../components/Loader'\r\nimport Message from '../components/Message'\r\nimport { listOrders, deleteOrder } from '../actions/orderActions'\r\n\r\n\r\nfunction OrderListScreen() {\r\n\r\n    const dispatch = useDispatch()\r\n    const navigate = useNavigate()\r\n\r\n    const orderList = useSelector(state => state.orderList)\r\n    const { loading, error, orders } = orderList\r\n\r\n    const userLogin = useSelector(state => state.userLogin)\r\n    const { userInfo } = userLogin\r\n\r\n    const orderDelete = useSelector(state => state.orderDelete)\r\n    const { loading: loadingDelete, error: errorDelete, success: successDelete } = orderDelete\r\n\r\n    useEffect(() => {\r\n        if (userInfo && userInfo.isAdmin) {\r\n            dispatch(listOrders())\r\n        } else navigate(-1)\r\n    }, [dispatch, userInfo, successDelete, navigate])\r\n\r\n    const deleteHandler = (id) => {\r\n        if(window.confirm('Are you sure you want to delete this order?')) {\r\n            dispatch(deleteOrder(id))\r\n        }\r\n    }\r\n\r\n    const deleteWhenNoUser = (id) => {\r\n        dispatch(deleteOrder(id))\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <h1>Orders</h1>\r\n            {loadingDelete && <Loader />}\r\n            {errorDelete && <Message variant='danger'>{errorDelete}</Message>}\r\n\r\n            { loading \r\n                ? <Loader /> \r\n                : error \r\n                    ? <Message variant='danger'>{error}</Message>\r\n                    : (\r\n                        <Table striped bordered hover responsive style={{ tableLayout: 'fixed', width: '100%' }}>\r\n                            <thead>\r\n                                <tr>\r\n                                    <th style={{ width: '14%' }}>ID</th>\r\n                                    <th style={{ width: '14%' }}>USER</th>\r\n                                    <th style={{ width: '14%' }}>DATE</th>\r\n                                    <th style={{ width: '14%' }}>TOTAL</th>\r\n                                    <th style={{ width: '14%' }}>PAID</th>\r\n                                    <th style={{ width: '14%' }}>DELIVERED</th>\r\n                                    <th style={{ width: '10%' }}></th>\r\n                                </tr>\r\n                            </thead>\r\n\r\n                            <tbody>\r\n                                {orders.map(order => (\r\n                                    \r\n\r\n                                    <tr key={order._id}>\r\n                                        {!order.user || !order.user.name ? (\r\n                                            deleteWhenNoUser(order._id)\r\n                                        ) : (\r\n                                                \r\n                                            <>\r\n                                            <td style={{ width: '14%' }}>{order._id}</td>\r\n                                            <td style={{ width: '14%' }}>{order.user && order.user.name}</td>\r\n                                            <td style={{ width: '14%' }}>{new Date(order.createdAt).toLocaleString()}</td>\r\n                                            <td style={{ width: '14%' }}>${order.totalPrice}</td>\r\n                                            <td style={{ width: '14%' }}>{order.isPaid \r\n                                                ? new Date(order.paidAt).toLocaleString()\r\n                                                : <i className='fas fa-times' style={{color:'red'}}></i>}\r\n                                            </td>\r\n                                            <td style={{ width: '14%' }}>{order.isDelivered \r\n                                                ? new Date(order.deliveredAt).toLocaleString()\r\n                                                : <i className='fas fa-times' style={{color:'red'}}></i>}\r\n                                            </td>\r\n                                            <td style={{ width: '10%' }}>\r\n                                                <LinkContainer to={`/order/${order._id}`}>\r\n                                                    <Button variant='light' className='btn-sm'>\r\n                                                        <i class='fa-solid fa-circle-info'></i>\r\n                                                    </Button>\r\n                                                </LinkContainer>\r\n                                                <Button variant='danger' className='btn-sm' onClick={() => deleteHandler(order._id)}>\r\n                                                    <i class='fa-solid fa-trash'></i>\r\n                                                </Button>\r\n                                            </td>\r\n                                            </>\r\n                                        )}\r\n                                    </tr>\r\n                                ))}\r\n                            </tbody>\r\n                        </Table>\r\n                    )}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default OrderListScreen\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}