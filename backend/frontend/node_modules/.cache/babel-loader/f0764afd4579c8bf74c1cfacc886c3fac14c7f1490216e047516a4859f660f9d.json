{"ast":null,"code":"import React,{useEffect}from'react';import{Button,Table,Row,Col}from'react-bootstrap';import{LinkContainer}from'react-router-bootstrap';import{useDispatch,useSelector}from'react-redux';import{useNavigate}from'react-router-dom';import Loader from'../components/Loader';import Message from'../components/Message';import{listPromoCodes,deletePromoCode,createPromoCode}from'../actions/orderActions';import{ORDER_PROMO_CODE_CREATE_RESET}from'../constants/orderConstants';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function PromoCodeListScreen(){var dispatch=useDispatch();var navigate=useNavigate();var promoCodeList=useSelector(function(state){return state.promoCodeList;});var loading=promoCodeList.loading,error=promoCodeList.error,promoCodes=promoCodeList.promoCodes;var userLogin=useSelector(function(state){return state.userLogin;});var userInfo=userLogin.userInfo;var promoCodeDelete=useSelector(function(state){return state.promoCodeDelete;});var successDelete=promoCodeDelete.success;var promoCodeCreate=useSelector(function(state){return state.promoCodeCreate;});var loadingCreate=promoCodeCreate.loading,errorCreate=promoCodeCreate.error,successCreate=promoCodeCreate.success,createdPromoCode=promoCodeCreate.promoCode;useEffect(function(){dispatch({type:ORDER_PROMO_CODE_CREATE_RESET});if(!userInfo.isAdmin){navigate(-1);}if(successCreate){navigate(\"/admin/orders/promocodes/\".concat(createdPromoCode.id,\"/edit\"));}else{dispatch(listPromoCodes());}},[dispatch,userInfo,successDelete,navigate,successCreate,createdPromoCode]);var deleteHandler=function deleteHandler(id){if(window.confirm('Are you sure you want to delete this promocode?')){dispatch(deletePromoCode(id));}};var createPromoCodeHandler=function createPromoCodeHandler(){dispatch(createPromoCode());};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(Row,{className:\"align-items-center\",children:[/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsx(\"h1\",{children:\"Promo Codes\"})}),/*#__PURE__*/_jsx(Col,{className:\"text-right\",children:/*#__PURE__*/_jsxs(Button,{className:\"my-3\",onClick:createPromoCodeHandler,children:[/*#__PURE__*/_jsx(\"i\",{className:\"fa-solid fa-plus\"}),\" Create PromoCode\"]})})]}),loadingCreate&&/*#__PURE__*/_jsx(Loader,{}),errorCreate&&/*#__PURE__*/_jsx(Message,{variant:\"danger\",children:errorCreate}),loading?/*#__PURE__*/_jsx(Loader,{}):error?/*#__PURE__*/_jsx(Message,{variant:\"danger\",children:error}):/*#__PURE__*/_jsxs(Table,{striped:true,bordered:true,hover:true,responsive:true,style:{tableLayout:'fixed',width:'100%'},children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{style:{width:'25%'},children:\"ID\"}),/*#__PURE__*/_jsx(\"th\",{style:{width:'25%'},children:\"PROMO CODE\"}),/*#__PURE__*/_jsx(\"th\",{style:{width:'25%'},children:\"DISCOUNT IN %\"}),/*#__PURE__*/_jsx(\"th\",{style:{width:'10%'}})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:promoCodes.map(function(promocode){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{style:{width:'25%'},children:promocode.id}),/*#__PURE__*/_jsx(\"td\",{style:{width:'25%'},children:promocode.promoCode}),/*#__PURE__*/_jsx(\"td\",{style:{width:'25%'},children:promocode.discount}),/*#__PURE__*/_jsxs(\"td\",{style:{width:'10%'},children:[/*#__PURE__*/_jsx(LinkContainer,{to:\"/admin/orders/promocodes/\".concat(promocode.id,\"/edit\"),children:/*#__PURE__*/_jsx(Button,{variant:\"light\",className:\"btn-sm\",children:/*#__PURE__*/_jsx(\"i\",{class:\"fa-solid fa-pen-to-square\"})})}),/*#__PURE__*/_jsx(Button,{variant:\"danger\",className:\"btn-sm\",onClick:function onClick(){return deleteHandler(promocode.id);},children:/*#__PURE__*/_jsx(\"i\",{class:\"fa-solid fa-trash\"})})]})]},promocode._id);})})]})]});}export default PromoCodeListScreen;","map":{"version":3,"names":["React","useEffect","Button","Table","Row","Col","LinkContainer","useDispatch","useSelector","useNavigate","Loader","Message","listPromoCodes","deletePromoCode","createPromoCode","ORDER_PROMO_CODE_CREATE_RESET","jsx","_jsx","jsxs","_jsxs","PromoCodeListScreen","dispatch","navigate","promoCodeList","state","loading","error","promoCodes","userLogin","userInfo","promoCodeDelete","successDelete","success","promoCodeCreate","loadingCreate","errorCreate","successCreate","createdPromoCode","promoCode","type","isAdmin","concat","id","deleteHandler","window","confirm","createPromoCodeHandler","children","className","onClick","variant","striped","bordered","hover","responsive","style","tableLayout","width","map","promocode","discount","to","class","_id"],"sources":["C:/ecomm/backend/frontend/src/screens/PromoCodeListScreen.js"],"sourcesContent":["import React, {useEffect} from 'react'\r\nimport { Button, Table, Row, Col } from 'react-bootstrap'\r\nimport { LinkContainer } from 'react-router-bootstrap'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { useNavigate } from 'react-router-dom'\r\nimport Loader from '../components/Loader'\r\nimport Message from '../components/Message'\r\nimport { listPromoCodes, deletePromoCode, createPromoCode } from '../actions/orderActions'\r\nimport { ORDER_PROMO_CODE_CREATE_RESET } from '../constants/orderConstants'\r\n\r\n\r\nfunction PromoCodeListScreen() {\r\n\r\n    const dispatch = useDispatch()\r\n    const navigate = useNavigate()\r\n\r\n    const promoCodeList = useSelector(state => state.promoCodeList)\r\n    const { loading, error, promoCodes } = promoCodeList\r\n\r\n    const userLogin = useSelector(state => state.userLogin)\r\n    const { userInfo } = userLogin\r\n\r\n    const promoCodeDelete = useSelector(state => state.promoCodeDelete)\r\n    const { success: successDelete } = promoCodeDelete\r\n\r\n    const promoCodeCreate = useSelector(state => state.promoCodeCreate)\r\n    const { loading: loadingCreate, error: errorCreate, success: successCreate, promoCode: createdPromoCode } = promoCodeCreate\r\n\r\n    useEffect(() => {\r\n        dispatch({type:ORDER_PROMO_CODE_CREATE_RESET})\r\n\r\n        if (!userInfo.isAdmin) {\r\n            navigate(-1)\r\n        }\r\n\r\n        if (successCreate) {\r\n            navigate(`/admin/orders/promocodes/${createdPromoCode.id}/edit`)\r\n        } else {\r\n            dispatch(listPromoCodes())\r\n        }\r\n    }, [dispatch, userInfo, successDelete, navigate, successCreate, createdPromoCode])\r\n\r\n\r\n    const deleteHandler = (id) => {\r\n        if(window.confirm('Are you sure you want to delete this promocode?')) {\r\n            dispatch(deletePromoCode(id))\r\n        }\r\n    }\r\n\r\n    const createPromoCodeHandler = () => {\r\n        dispatch(createPromoCode())\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <Row className='align-items-center'>\r\n                <Col>\r\n                    <h1>Promo Codes</h1>\r\n                </Col>\r\n                <Col className='text-right'>\r\n                    <Button className='my-3' onClick={createPromoCodeHandler}>\r\n                        <i className='fa-solid fa-plus'></i> Create PromoCode\r\n                    </Button>\r\n                </Col>\r\n            </Row>\r\n                        \r\n            {loadingCreate && <Loader />}\r\n            {errorCreate && <Message variant='danger'>{errorCreate}</Message>}\r\n            \r\n            { loading \r\n                ? <Loader /> \r\n                : error \r\n                    ? <Message variant='danger'>{error}</Message>\r\n                    : (\r\n                        <Table striped bordered hover responsive style={{ tableLayout: 'fixed', width: '100%' }}>\r\n                            <thead>\r\n                                <tr>\r\n                                    <th style={{ width: '25%' }}>ID</th>\r\n                                    <th style={{ width: '25%' }}>PROMO CODE</th>\r\n                                    <th style={{ width: '25%' }}>DISCOUNT IN %</th>\r\n                                    <th style={{ width: '10%' }}></th>\r\n                                </tr>\r\n                            </thead>\r\n\r\n                            <tbody>\r\n                                {promoCodes.map(promocode => (\r\n                                    <tr key={promocode._id}>\r\n                                        <td style={{ width: '25%' }}>{promocode.id}</td>\r\n                                        <td style={{ width: '25%' }}>{promocode.promoCode}</td>\r\n                                        <td style={{ width: '25%' }}>{promocode.discount}</td>\r\n                                        <td style={{ width: '10%' }}>\r\n                                            <LinkContainer to={`/admin/orders/promocodes/${promocode.id}/edit`}>\r\n                                                <Button variant='light' className='btn-sm'>\r\n                                                    <i class='fa-solid fa-pen-to-square'></i>\r\n                                                </Button>\r\n                                            </LinkContainer>\r\n                                            <Button variant='danger' className='btn-sm' onClick={() => deleteHandler(promocode.id)}>\r\n                                                <i class='fa-solid fa-trash'></i>\r\n                                            </Button>\r\n                                        </td>\r\n \r\n                                    </tr>\r\n                                ))}\r\n                            </tbody>\r\n                        </Table>\r\n                    )}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default PromoCodeListScreen\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}